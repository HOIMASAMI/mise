<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<title>Click the button to get your coo</title>
</head>
<body>

<p>1741</p>

<button onclick="getLocation()">Try It</button>

<form method="POST" action="--WEBBOT-SELF--">
	<!--webbot bot="SaveResults" U-File="fpweb:///_private/form_results.csv" S-Format="TEXT/CSV" S-Label-Fields="TRUE" -->
	<p><textarea id="demo" rows="17" name="S1" cols="67"></textarea></p>
</form>

<script>
var x = document.getElementById("demo");

function showPosition(position) {
	x.value = x.value + "<br>Start showPosition."
  x.value = x.value + "Latitude: " + position.coords.latitude +
  "<br>Longitude: " + position.coords.longitude;
}

function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.value = x.value + "<br>User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.value = x.value + "<br>Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.value = x.value + "<br>The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.value = x.value + "<br>An unknown error occurred."
      break;
  }
}

function successHandler(position) {
    const { longitude, latitude } = position.coords;
    x.value = x.value + "<br>Start showPosition2."
      x.value = x.value + "<br>Latitude: " + latitude +
  "<br>Longitude: " + longitude;
  }

function getLocation() {
	x.value=x.value+"A";
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(successHandler,showError);
  } else {
    x.value = x.value + "<br>Geolocation is not supported by this browser.";
    showError(navigator.geolocatio);
  }
}
</script>
</body>

</html>
